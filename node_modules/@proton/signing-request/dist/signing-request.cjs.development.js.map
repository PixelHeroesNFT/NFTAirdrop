{"version":3,"file":"signing-request.cjs.development.js","sources":["../../../node_modules/regenerator-runtime/runtime.js","../src/abi.ts","../src/base64u.ts","../src/signing-request.ts"],"sourcesContent":["/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","/** SigningRequest ABI and typedefs. */\n\nexport type AccountName = string /*name*/\nexport type ActionName = string /*name*/\nexport type PermissionName = string /*name*/\nexport type ChainAlias = number /*uint8*/\nexport type ChainId = string /*checksum256*/\nexport type VariantId = ['chain_alias', ChainAlias] | ['chain_id', ChainId]\nexport type VariantReq =\n    | ['action', Action]\n    | ['action[]', Action[]]\n    | ['transaction', Transaction]\n    | ['identity', Identity]\n\nexport interface PermissionLevel {\n    actor: AccountName\n    permission: PermissionName\n}\n\nexport type RequestFlags = number\nexport const RequestFlagsNone = 0\nexport const RequestFlagsBroadcast = 1 << 0\nexport const RequestFlagsBackground = 1 << 1\n\nexport interface Action {\n    account: AccountName\n    name: ActionName\n    authorization: PermissionLevel[]\n    data: string | {[key: string]: any}\n}\n\nexport interface Extension {\n    type: number /*uint16*/\n    data: string /*bytes*/\n}\n\nexport interface TransactionHeader {\n    expiration: string /*time_point_sec*/\n    ref_block_num: number /*uint16*/\n    ref_block_prefix: number /*uint32*/\n    max_net_usage_words: number /*varuint32*/\n    max_cpu_usage_ms: number /*uint8*/\n    delay_sec: number /*varuint32*/\n}\n\nexport interface Transaction extends TransactionHeader {\n    context_free_actions: Action[]\n    actions: Action[]\n    transaction_extensions: Extension[]\n}\n\nexport interface SigningRequest {\n    chain_id: VariantId\n    req: VariantReq\n    flags: RequestFlags\n    callback: string\n    info: InfoPair[]\n}\n\nexport interface InfoPair {\n    key: string\n    value: Uint8Array | string /*bytes*/\n}\n\nexport interface Identity {\n    permission: PermissionLevel | undefined | null\n}\n\nexport interface RequestSignature {\n    signer: AccountName\n    signature: string\n}\n\nexport const data = {\n    version: 'eosio::abi/1.1',\n    types: [\n        {\n            new_type_name: 'account_name',\n            type: 'name',\n        },\n        {\n            new_type_name: 'action_name',\n            type: 'name',\n        },\n        {\n            new_type_name: 'permission_name',\n            type: 'name',\n        },\n        {\n            new_type_name: 'chain_alias',\n            type: 'uint8',\n        },\n        {\n            new_type_name: 'chain_id',\n            type: 'checksum256',\n        },\n        {\n            new_type_name: 'request_flags',\n            type: 'uint8',\n        },\n    ],\n    structs: [\n        {\n            name: 'permission_level',\n            fields: [\n                {\n                    name: 'actor',\n                    type: 'account_name',\n                },\n                {\n                    name: 'permission',\n                    type: 'permission_name',\n                },\n            ],\n        },\n        {\n            name: 'action',\n            fields: [\n                {\n                    name: 'account',\n                    type: 'account_name',\n                },\n                {\n                    name: 'name',\n                    type: 'action_name',\n                },\n                {\n                    name: 'authorization',\n                    type: 'permission_level[]',\n                },\n                {\n                    name: 'data',\n                    type: 'bytes',\n                },\n            ],\n        },\n        {\n            name: 'extension',\n            fields: [\n                {\n                    name: 'type',\n                    type: 'uint16',\n                },\n                {\n                    name: 'data',\n                    type: 'bytes',\n                },\n            ],\n        },\n        {\n            name: 'transaction_header',\n            fields: [\n                {\n                    name: 'expiration',\n                    type: 'time_point_sec',\n                },\n                {\n                    name: 'ref_block_num',\n                    type: 'uint16',\n                },\n                {\n                    name: 'ref_block_prefix',\n                    type: 'uint32',\n                },\n                {\n                    name: 'max_net_usage_words',\n                    type: 'varuint32',\n                },\n                {\n                    name: 'max_cpu_usage_ms',\n                    type: 'uint8',\n                },\n                {\n                    name: 'delay_sec',\n                    type: 'varuint32',\n                },\n            ],\n        },\n        {\n            name: 'transaction',\n            base: 'transaction_header',\n            fields: [\n                {\n                    name: 'context_free_actions',\n                    type: 'action[]',\n                },\n                {\n                    name: 'actions',\n                    type: 'action[]',\n                },\n                {\n                    name: 'transaction_extensions',\n                    type: 'extension[]',\n                },\n            ],\n        },\n        {\n            name: 'info_pair',\n            fields: [\n                {\n                    name: 'key',\n                    type: 'string',\n                },\n                {\n                    name: 'value',\n                    type: 'bytes',\n                },\n            ],\n        },\n        {\n            name: 'signing_request',\n            fields: [\n                {\n                    name: 'chain_id',\n                    type: 'variant_id',\n                },\n                {\n                    name: 'req',\n                    type: 'variant_req',\n                },\n                {\n                    name: 'flags',\n                    type: 'request_flags',\n                },\n                {\n                    name: 'callback',\n                    type: 'string',\n                },\n                {\n                    name: 'info',\n                    type: 'info_pair[]',\n                },\n            ],\n        },\n        {\n            name: 'identity',\n            fields: [\n                {\n                    name: 'permission',\n                    type: 'permission_level?',\n                },\n            ],\n        },\n        {\n            name: 'request_signature',\n            fields: [\n                {\n                    name: 'signer',\n                    type: 'name',\n                },\n                {\n                    name: 'signature',\n                    type: 'signature',\n                },\n            ],\n        },\n    ],\n    variants: [\n        {\n            name: 'variant_id',\n            types: ['chain_alias', 'chain_id'],\n        },\n        {\n            name: 'variant_req',\n            types: ['action', 'action[]', 'transaction', 'identity'],\n        },\n    ],\n    actions: [\n        {\n            name: 'identity',\n            type: 'identity',\n        },\n    ],\n}\n","/**\n * Base64u - URL-Safe Base64 variant no padding.\n * Based on https://gist.github.com/jonleighton/958841\n */\n\nconst charset = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_'\nconst lookup = new Uint8Array(256)\nfor (let i = 0; i < 64; i++) {\n    lookup[charset.charCodeAt(i)] = i\n}\n\nexport function encode(data: Uint8Array): string {\n    const byteLength = data.byteLength\n    const byteRemainder = byteLength % 3\n    const mainLength = byteLength - byteRemainder\n\n    const parts: string[] = []\n\n    let a: number\n    let b: number\n    let c: number\n    let d: number\n    let chunk: number\n\n    // Main loop deals with bytes in chunks of 3\n    for (let i = 0; i < mainLength; i += 3) {\n        // Combine the three bytes into a single integer\n        chunk = (data[i] << 16) | (data[i + 1] << 8) | data[i + 2]\n\n        // Use bitmasks to extract 6-bit segments from the triplet\n        a = (chunk & 16515072) >> 18 // 16515072 = (2^6 - 1) << 18\n        b = (chunk & 258048) >> 12 // 258048   = (2^6 - 1) << 12\n        c = (chunk & 4032) >> 6 // 4032     = (2^6 - 1) << 6\n        d = chunk & 63 // 63       =  2^6 - 1\n\n        // Convert the raw binary segments to the appropriate ASCII encoding\n        parts.push(charset[a] + charset[b] + charset[c] + charset[d])\n    }\n\n    // Deal with the remaining bytes\n    if (byteRemainder === 1) {\n        chunk = data[mainLength]\n\n        a = (chunk & 252) >> 2 // 252 = (2^6 - 1) << 2\n\n        // Set the 4 least significant bits to zero\n        b = (chunk & 3) << 4 // 3   = 2^2 - 1\n\n        parts.push(charset[a] + charset[b])\n    } else if (byteRemainder === 2) {\n        chunk = (data[mainLength] << 8) | data[mainLength + 1]\n\n        a = (chunk & 64512) >> 10 // 64512 = (2^6 - 1) << 10\n        b = (chunk & 1008) >> 4 // 1008  = (2^6 - 1) << 4\n\n        // Set the 2 least significant bits to zero\n        c = (chunk & 15) << 2 // 15    = 2^4 - 1\n\n        parts.push(charset[a] + charset[b] + charset[c])\n    }\n\n    return parts.join('')\n}\n\nexport function decode(input: string): Uint8Array {\n    const byteLength = input.length * 0.75\n    const data = new Uint8Array(byteLength)\n\n    let a: number\n    let b: number\n    let c: number\n    let d: number\n    let p: number = 0\n\n    for (let i = 0; i < input.length; i += 4) {\n        a = lookup[input.charCodeAt(i)]\n        b = lookup[input.charCodeAt(i + 1)]\n        c = lookup[input.charCodeAt(i + 2)]\n        d = lookup[input.charCodeAt(i + 3)]\n\n        data[p++] = (a << 2) | (b >> 4)\n        data[p++] = ((b & 15) << 4) | (c >> 2)\n        data[p++] = ((c & 3) << 6) | (d & 63)\n    }\n\n    return data\n}\n","/**\n * EOSIO Signing Request (ESR).\n */\n\nimport {Serialize} from '@proton/js'\nimport sha256 from 'fast-sha256'\nrequire('fast-text-encoding');\n\nimport * as abi from './abi'\nimport * as base64u from './base64u'\n\nconst ProtocolVersion = 2\n\nconst textEncoder = new TextEncoder()\nconst textDecoder = new TextDecoder()\nconst AbiTypes = Serialize.getTypesFromAbi(Serialize.createInitialTypes(), abi.data as any)\n\n/** Interface that should be implemented by abi providers. */\nexport interface AbiProvider {\n    /**\n     * Return a promise that resolves to an abi object for the given account name,\n     * e.g. the result of a rpc call to chain/get_abi.\n     */\n    getAbi: (account: string) => Promise<any>\n}\n\n/** Interface that should be implemented by zlib implementations. */\nexport interface ZlibProvider {\n    /** Deflate data w/o adding zlib header. */\n    deflateRaw: (data: Uint8Array) => Uint8Array\n    /** Inflate data w/o requiring zlib header. */\n    inflateRaw: (data: Uint8Array) => Uint8Array\n}\n\n/** Interface that should be implemented by signature providers. */\nexport interface SignatureProvider {\n    /** Sign 32-byte hex-encoded message and return signer name and signature string. */\n    sign: (message: string) => {signer: string; signature: string}\n}\n\n/**\n * The callback payload sent to background callbacks.\n */\nexport interface CallbackPayload {\n    /** The first signature. */\n    sig: string\n    /** Transaction ID as HEX-encoded string. */\n    tx: string\n    /** Block number hint (only present if transaction was broadcast). */\n    bn?: string\n    /** Signer authority, aka account name. */\n    sa: string\n    /** Signer permission, e.g. \"active\". */\n    sp: string\n    /** Reference block num used when resolving request. */\n    rbn: string\n    /** Reference block id used when resolving request. */\n    rid: string\n    /** The originating signing request packed as a uri string. */\n    req: string\n    /** Expiration time used when resolving request. */\n    ex: string\n    /** All signatures 0-indexed as `sig0`, `sig1`, etc. */\n    [sig0: string]: string | undefined\n}\n\n/**\n * Context used to resolve a callback.\n * Compatible with the JSON response from a `push_transaction` call.\n */\nexport interface ResolvedCallback {\n    /** The URL to hit. */\n    url: string\n    /**\n     * Whether to run the request in the background. For a https url this\n     * means POST in the background instead of a GET redirect.\n     */\n    background: boolean\n    /**\n     * The callback payload as a object that should be encoded to JSON\n     * and POSTed to background callbacks.\n     */\n    payload: CallbackPayload\n}\n\n/**\n * Context used to resolve a transaction.\n * Compatible with the JSON response from a `get_block` call.\n */\nexport interface TransactionContext {\n    /** Timestamp expiration will be derived from. */\n    timestamp?: string\n    /**\n     * How many seconds in the future to set expiration when deriving from timestamp.\n     * Defaults to 60 seconds if unset.\n     */\n    expire_seconds?: number\n    /** Block number ref_block_num will be derived from. */\n    block_num?: number\n    /** Reference block number, takes precedence over block_num if both is set. */\n    ref_block_num?: number\n    /** Reference block prefix. */\n    ref_block_prefix?: number\n    /** Expiration timestamp, takes precedence over timestamp and expire_seconds if set. */\n    expiration?: string\n}\n\n/** Chain ID aliases. */\nexport enum ChainName {\n    UNKNOWN = 0, // reserved\n    EOS = 1,\n    TELOS = 2,\n    JUNGLE = 3,\n    KYLIN = 4,\n    WORBLI = 5,\n    BOS = 6,\n    MEETONE = 7,\n    INSIGHTS = 8,\n    BEOS = 9,\n    WAX = 10,\n    PROTON = 11,\n    FIO = 12,\n}\n\nconst ChainIdLookup = new Map<abi.ChainAlias, abi.ChainId>([\n    [ChainName.EOS, 'aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906'],\n    [ChainName.TELOS, '4667b205c6838ef70ff7988f6e8257e8be0e1284a2f59699054a018f743b1d11'],\n    [ChainName.JUNGLE, 'e70aaab8997e1dfce58fbfac80cbbb8fecec7b99cf982a9444273cbc64c41473'],\n    [ChainName.KYLIN, '5fff1dae8dc8e2fc4d5b23b2c7665c97f9e9d8edf2b6485a86ba311c25639191'],\n    [ChainName.WORBLI, '73647cde120091e0a4b85bced2f3cfdb3041e266cbbe95cee59b73235a1b3b6f'],\n    [ChainName.BOS, 'd5a3d18fbb3c084e3b1f3fa98c21014b5f3db536cc15d08f9f6479517c6a3d86'],\n    [ChainName.MEETONE, 'cfe6486a83bad4962f232d48003b1824ab5665c36778141034d75e57b956e422'],\n    [ChainName.INSIGHTS, 'b042025541e25a472bffde2d62edd457b7e70cee943412b1ea0f044f88591664'],\n    [ChainName.BEOS, 'b912d19a6abd2b1b05611ae5be473355d64d95aeff0c09bedc8c166cd6468fe4'],\n    [ChainName.WAX, '1064487b3cd1a897ce03ae5b6a865651747e2e152090f99c1d19d44e01aea5a4'],\n    [ChainName.PROTON, '384da888112027f0321850a169f737c33e53b388aad48b5adace4bab97f437e0'],\n    [ChainName.FIO, '21dcae42c0182200e93f954a074011f9048a7624c6fe81d3c9541a614a88bd1c'],\n])\n\nconst DEFAULT_SCHEME = 'esr'\n\n/**\n * The placeholder name: `............1` aka `uint64(1)`.\n * If used in action data will be resolved to current signer.\n * If used in as an authorization permission will be resolved to\n * the signers permission level.\n *\n * Example action:\n * ```\n * { account: \"eosio.token\",\n *   name: \"transfer\",\n *   authorization: [{actor: \"............1\", permission: \"............1\"}],\n *   data: {\n *     from: \"............1\",\n *     to: \"bar\",\n *     quantity: \"42.0000 EOS\",\n *     memo: \"Don't panic\" }}\n * ```\n * When signed by `foo@active` would resolve to:\n * ```\n * { account: \"eosio.token\",\n *   name: \"transfer\",\n *   authorization: [{actor: \"foo\", permission: \"active\"}],\n *   data: {\n *     from: \"foo\",\n *     to: \"bar\",\n *     quantity: \"42.0000 EOS\",\n *     memo: \"Don't panic\" }}\n * ```\n */\nexport const PlaceholderName = '............1' // aka uint64(1)\n\n/** Placeholder that will resolve to signer permission name. */\nexport const PlaceholderPermission = '............2' // aka uint64(2)\n\nexport const PlaceholderAuth: abi.PermissionLevel = {\n    actor: PlaceholderName,\n    permission: PlaceholderPermission,\n}\n\nexport type CallbackType = string | {url: string; background: boolean}\n\nexport interface SigningRequestCreateArguments {\n    /** Single action to create request with. */\n    action?: abi.Action\n    /** Multiple actions to create request with. */\n    actions?: abi.Action[]\n    /**\n     * Full or partial transaction to create request with.\n     * If TAPoS info is omitted it will be filled in when resolving the request.\n     */\n    transaction?: {actions: abi.Action[]; [key: string]: any}\n    /** Create an identity request. */\n    identity?: abi.Identity\n    /** Chain to use, defaults to EOS main-net if omitted. */\n    chainId?: string | number\n    /** Whether wallet should broadcast tx, defaults to true. */\n    broadcast?: boolean\n    /**\n     * Optional callback URL the signer should hit after\n     * broadcasting or signing. Passing a string means background = false.\n     */\n    callback?: CallbackType\n    /** Optional metadata to pass along with the request. */\n    info?: {[key: string]: string | Uint8Array}\n}\n\nexport interface SigningRequestCreateIdentityArguments {\n    /**\n     * Callback where the identity should be delivered.\n     */\n    callback: CallbackType\n    /** Chain to use, defaults to EOS if omitted. */\n    chainId?: string | number\n    /**\n     * Requested account name of identity.\n     * Defaults to placeholder (any identity) if omitted.\n     */\n    account?: string\n    /**\n     * Requested account permission.\n     * Defaults to placeholder (any permission) if omitted.\n     */\n    permission?: string\n    /** Optional metadata to pass along with the request. */\n    info?: {[key: string]: string | Uint8Array}\n}\n\nexport interface SigningRequestEncodingOptions {\n    /** Optional zlib, if provided the request will be compressed when encoding. */\n    zlib?: ZlibProvider\n    /** Abi provider, required if the arguments contain un-encoded actions. */\n    abiProvider?: AbiProvider\n    /** Optional signature provider, will be used to create a request signature if provided. */\n    signatureProvider?: SignatureProvider\n    /** Custom Scheme . */\n    scheme?: string\n}\n\nexport type AbiMap = Map<string, any>\n\nexport class SigningRequest {\n    public static type = AbiTypes.get('signing_request')!\n    public static idType = AbiTypes.get('identity')!\n    public static transactionType = AbiTypes.get('transaction')!\n    public scheme: string = DEFAULT_SCHEME\n\n    /** Create a new signing request. */\n    public static async create(\n        args: SigningRequestCreateArguments,\n        options: SigningRequestEncodingOptions = {}\n    ) {\n        const data: any = {}\n\n        const serialize = (action: abi.Action) => {\n            return serializeAction(action, options.abiProvider)\n        }\n\n        // set the request data\n        if (args.identity !== undefined) {\n            data.req = ['identity', args.identity]\n        } else if (args.action && !args.actions && !args.transaction) {\n            data.req = ['action', await serialize(args.action)]\n        } else if (args.actions && !args.action && !args.transaction) {\n            if (args.actions.length === 1) {\n                data.req = ['action', await serialize(args.actions[0])]\n            } else {\n                data.req = ['action[]', await Promise.all(args.actions.map(serialize))]\n            }\n        } else if (args.transaction && !args.action && !args.actions) {\n            const tx = args.transaction\n            // set default values if missing\n            if (tx.expiration === undefined) {\n                tx.expiration = '1970-01-01T00:00:00.000'\n            }\n            if (tx.ref_block_num === undefined) {\n                tx.ref_block_num = 0\n            }\n            if (tx.ref_block_prefix === undefined) {\n                tx.ref_block_prefix = 0\n            }\n            if (tx.context_free_actions === undefined) {\n                tx.context_free_actions = []\n            }\n            if (tx.transaction_extensions === undefined) {\n                tx.transaction_extensions = []\n            }\n            if (tx.delay_sec === undefined) {\n                tx.delay_sec = 0\n            }\n            if (tx.max_cpu_usage_ms === undefined) {\n                tx.max_cpu_usage_ms = 0\n            }\n            if (tx.max_net_usage_words === undefined) {\n                tx.max_net_usage_words = 0\n            }\n            // encode actions if needed\n            tx.actions = await Promise.all(tx.actions.map(serialize))\n            data.req = ['transaction', tx]\n        } else {\n            throw new TypeError(\n                'Invalid arguments: Must have exactly one of action, actions or transaction'\n            )\n        }\n\n        // set the chain id\n        data.chain_id = variantId(args.chainId)\n        data.flags = abi.RequestFlagsNone\n\n        const broadcast = args.broadcast !== undefined ? args.broadcast : true\n        if (broadcast) {\n            data.flags |= abi.RequestFlagsBroadcast\n        }\n        if (typeof args.callback === 'string') {\n            data.callback = args.callback\n        } else if (typeof args.callback === 'object') {\n            data.callback = args.callback.url\n            if (args.callback.background) {\n                data.flags |= abi.RequestFlagsBackground\n            }\n        } else {\n            data.callback = ''\n        }\n\n        data.info = []\n        if (typeof args.info === 'object') {\n            for (const key in args.info) {\n                if (args.info.hasOwnProperty(key)) {\n                    let value = args.info[key]\n                    if (typeof key !== 'string') {\n                        throw new Error('Invalid info dict, keys must be strings')\n                    }\n                    if (typeof value === 'string') {\n                        value = textEncoder.encode(value)\n                    }\n                    data.info.push({key, value})\n                }\n            }\n        }\n\n        const req = new SigningRequest(\n            ProtocolVersion,\n            data,\n            options.zlib,\n            options.abiProvider,\n            undefined,\n            options.scheme\n        )\n\n        // sign the request if given a signature provider\n        if (options.signatureProvider) {\n            req.sign(options.signatureProvider)\n        }\n\n        return req\n    }\n\n    /** Creates an identity request. */\n    public static identity(\n        args: SigningRequestCreateIdentityArguments,\n        options: SigningRequestEncodingOptions = {}\n    ) {\n        let permission: abi.PermissionLevel | null = {\n            actor: args.account || PlaceholderName,\n            permission: args.permission || PlaceholderPermission,\n        }\n        if (\n            permission.actor === PlaceholderName &&\n            permission.permission === PlaceholderPermission\n        ) {\n            permission = null\n        }\n        return this.create(\n            {\n                identity: {\n                    permission,\n                },\n                broadcast: false,\n                callback: args.callback,\n                info: args.info,\n            },\n            options\n        )\n    }\n\n    /**\n     * Create a request from a chain id and serialized transaction.\n     * @param chainId The chain id where the transaction is valid.\n     * @param serializedTransaction The serialized transaction.\n     * @param options Creation options.\n     */\n    public static fromTransaction(\n        chainId: Uint8Array | string,\n        serializedTransaction: Uint8Array | string,\n        options: SigningRequestEncodingOptions = {}\n    ) {\n        if (typeof chainId !== 'string') {\n            chainId = Serialize.arrayToHex(chainId)\n        }\n        if (typeof serializedTransaction === 'string') {\n            serializedTransaction = Serialize.hexToUint8Array(serializedTransaction)\n        }\n        let buf = new Serialize.SerialBuffer()\n        buf.push(2) // header\n        const id = variantId(chainId as any)\n        if (id[0] === 'chain_alias') {\n            buf.push(0)\n            buf.push(id[1])\n        } else {\n            buf.push(1)\n            buf.pushArray(Serialize.hexToUint8Array(id[1]))\n        }\n        buf.push(2) // transaction variant\n        buf.pushArray(serializedTransaction)\n        buf.push(abi.RequestFlagsBroadcast) // flags\n        buf.push(0) // callback\n        buf.push(0) // info\n        return SigningRequest.fromData(buf.asUint8Array(), options)\n    }\n\n    /** Creates a signing request from encoded `esr:` uri string. */\n    public static from(uri: string, options: SigningRequestEncodingOptions = {}) {\n        if (typeof uri !== 'string') {\n            throw new Error('Invalid request uri')\n        }\n        const [scheme, path] = uri.split(':')\n        if (scheme !== (options.scheme || DEFAULT_SCHEME) && scheme !== `web+${(options.scheme || DEFAULT_SCHEME)}`) {\n            throw new Error('Invalid scheme')\n        }\n        const data = base64u.decode(path.startsWith('//') ? path.slice(2) : path)\n        return SigningRequest.fromData(data, options)\n    }\n\n    public static fromData(data: Uint8Array, options: SigningRequestEncodingOptions = {}) {\n        const header = data[0]\n        const version = header & ~(1 << 7)\n        if (version !== ProtocolVersion) {\n            throw new Error('Unsupported protocol version')\n        }\n        let array = data.slice(1)\n        if ((header & (1 << 7)) !== 0) {\n            if (!options.zlib) {\n                throw new Error('Compressed URI needs zlib')\n            }\n            array = options.zlib.inflateRaw(array)\n        }\n        const buffer = new Serialize.SerialBuffer({\n            array,\n        })\n        const req = SigningRequest.type.deserialize(buffer)\n        let signature: abi.RequestSignature | undefined\n        if (buffer.haveReadData()) {\n            const type = AbiTypes.get('request_signature')!\n            signature = type.deserialize(buffer)\n        }\n        return new SigningRequest(\n            version,\n            req,\n            options.zlib,\n            options.abiProvider,\n            signature,\n            options.scheme\n        )\n    }\n\n    /** The signing request version. */\n    public version: number\n\n    /** The raw signing request data. */\n    public data: abi.SigningRequest\n\n    /** The request signature. */\n    public signature?: abi.RequestSignature\n\n    private zlib?: ZlibProvider\n    private abiProvider?: AbiProvider\n\n    /**\n     * Create a new signing request.\n     * Normally not used directly, see the `create` and `from` class methods.\n     */\n    constructor(\n        version: number,\n        data: abi.SigningRequest,\n        zlib?: ZlibProvider,\n        abiProvider?: AbiProvider,\n        signature?: abi.RequestSignature,\n        scheme?: string\n    ) {\n        if ((data.flags & abi.RequestFlagsBroadcast) !== 0 && data.req[0] === 'identity') {\n            throw new Error('Invalid request (identity request cannot be broadcast)')\n        }\n        if ((data.flags & abi.RequestFlagsBroadcast) === 0 && data.callback.length === 0) {\n            throw new Error('Invalid request (nothing to do, no broadcast or callback set)')\n        }\n        this.version = version\n        this.data = data\n        this.zlib = zlib\n        this.abiProvider = abiProvider\n        this.signature = signature\n        this.scheme = scheme || this.scheme\n    }\n\n    /**\n     * Sign the request, mutating.\n     * @param signatureProvider The signature provider that provides a signature for the signer.\n     */\n    public sign(signatureProvider: SignatureProvider) {\n        const message = this.getSignatureDigest()\n        this.signature = signatureProvider.sign(Serialize.arrayToHex(message))\n    }\n\n    /**\n     * Get the signature digest for this request.\n     */\n    public getSignatureDigest() {\n        const buffer = new Serialize.SerialBuffer()\n        // protocol version + utf8 \"request\"\n        buffer.pushArray([this.version, 0x72, 0x65, 0x71, 0x75, 0x65, 0x73, 0x74])\n        buffer.pushArray(this.getData())\n        return sha256(buffer.asUint8Array())\n    }\n\n    /**\n     * Set the signature data for this request, mutating.\n     * @param signer Account name of signer.\n     * @param signature The signature string.\n     */\n    public setSignature(signer: string, signature: string) {\n        this.signature = {signer, signature}\n    }\n\n    /**\n     * Set the request callback, mutating.\n     * @param url Where the callback should be sent.\n     * @param background Whether the callback should be sent in the background.\n     */\n    public setCallback(url: string, background: boolean) {\n        this.data.callback = url\n        if (background) {\n            this.data.flags |= abi.RequestFlagsBackground\n        } else {\n            this.data.flags &= ~abi.RequestFlagsBackground\n        }\n    }\n\n    /**\n     * Set broadcast flag.\n     * @param broadcast Whether the transaction should be broadcast by receiver.\n     */\n    public setBroadcast(broadcast: boolean) {\n        if (broadcast) {\n            this.data.flags |= abi.RequestFlagsBroadcast\n        } else {\n            this.data.flags &= ~abi.RequestFlagsBroadcast\n        }\n    }\n\n    /**\n     * Encode this request into an `esr:` uri.\n     * @argument compress Whether to compress the request data using zlib,\n     *                    defaults to true if omitted and zlib is present;\n     *                    otherwise false.\n     * @argument slashes Whether add slashes after the protocol scheme, i.e. `esr://`.\n     *                   Defaults to true.\n     * @returns An esr uri string.\n     */\n    public encode(compress?: boolean, slashes?: boolean): string {\n        const shouldCompress = compress !== undefined ? compress : this.zlib !== undefined\n        if (shouldCompress && this.zlib === undefined) {\n            throw new Error('Need zlib to compress')\n        }\n        let header = this.version\n        const data = this.getData()\n        const sigData = this.getSignatureData()\n        let array = new Uint8Array(data.byteLength + sigData.byteLength)\n        array.set(data, 0)\n        array.set(sigData, data.byteLength)\n        if (shouldCompress) {\n            const deflated = this.zlib!.deflateRaw(array)\n            if (array.byteLength > deflated.byteLength) {\n                header |= 1 << 7\n                array = deflated\n            }\n        }\n        const out = new Uint8Array(1 + array.byteLength)\n        out[0] = header\n        out.set(array, 1)\n        let scheme = `${this.scheme}:`\n        if (slashes !== false) {\n            scheme += '//'\n        }\n        return scheme + base64u.encode(out)\n    }\n\n    /** Get the request data without header or signature. */\n    public getData(): Uint8Array {\n        const buffer = new Serialize.SerialBuffer()\n        SigningRequest.type.serialize(buffer, this.data)\n        return buffer.asUint8Array()\n    }\n\n    /** Get signature data, returns an empty array if request is not signed. */\n    public getSignatureData(): Uint8Array {\n        if (!this.signature) {\n            return new Uint8Array(0)\n        }\n        const buffer = new Serialize.SerialBuffer()\n        const type = AbiTypes.get('request_signature')!\n        type.serialize(buffer, this.signature)\n        return buffer.asUint8Array()\n    }\n\n    /** ABI definitions required to resolve request. */\n    public getRequiredAbis() {\n        return this.getRawActions()\n            .filter((action) => !isIdentity(action))\n            .map((action) => action.account)\n            .filter((value, index, self) => self.indexOf(value) === index)\n    }\n\n    /** Whether TaPoS values are required to resolve request. */\n    public requiresTapos() {\n        let tx = this.getRawTransaction()\n        return !this.isIdentity() && !hasTapos(tx)\n    }\n\n    /** Resolve required ABI definitions. */\n    public async fetchAbis(abiProvider?: AbiProvider): Promise<AbiMap> {\n        const provider = abiProvider || this.abiProvider\n        if (!provider) {\n            throw new Error('Missing ABI provider')\n        }\n        const abis = new Map<string, any>()\n        await Promise.all(\n            this.getRequiredAbis().map(async (account) => {\n                abis.set(account, await provider.getAbi(account))\n            })\n        )\n        return abis\n    }\n\n    /**\n     * Decode raw actions actions to object representations.\n     * @param abis ABI defenitions required to decode all actions.\n     * @param signer Placeholders in actions will be resolved to signer if set.\n     */\n    public resolveActions(abis: AbiMap, signer?: abi.PermissionLevel): abi.Action[] {\n        return this.getRawActions().map((rawAction) => {\n            let contractAbi: any | undefined\n            if (isIdentity(rawAction)) {\n                contractAbi = abi.data\n            } else {\n                contractAbi = abis.get(rawAction.account)\n            }\n            if (!contractAbi) {\n                throw new Error(`Missing ABI definition for ${rawAction.account}`)\n            }\n            const contract = getContract(contractAbi)\n            if (signer) {\n                // hook into eosjs name decoder and return the signing account if we encounter the placeholder\n                // this is fine because getContract re-creates the initial types each time\n                contract.types.get('name')!.deserialize = (buffer: Serialize.SerialBuffer) => {\n                    const name = buffer.getName()\n                    if (name === PlaceholderName) {\n                        return signer.actor\n                    } else if (name === PlaceholderPermission) {\n                        return signer.permission\n                    } else {\n                        return name\n                    }\n                }\n            }\n            const action = Serialize.deserializeAction(\n                contract,\n                rawAction.account,\n                rawAction.name,\n                rawAction.authorization,\n                rawAction.data as any,\n            )\n            if (signer) {\n                action.authorization = action.authorization.map((auth: any) => {\n                    let {actor, permission} = auth\n                    if (actor === PlaceholderName) {\n                        actor = signer.actor\n                    }\n                    if (permission === PlaceholderPermission) {\n                        permission = signer.permission\n                    }\n                    // backwards compatibility, actor placeholder will also resolve to permission when used in auth\n                    if (permission === PlaceholderName) {\n                        permission = signer.permission\n                    }\n                    return {actor, permission}\n                })\n            }\n            return action\n        })\n    }\n\n    public resolveTransaction(\n        abis: AbiMap,\n        signer: abi.PermissionLevel,\n        ctx: TransactionContext = {}\n    ): abi.Transaction {\n        let tx = this.getRawTransaction()\n        if (!this.isIdentity() && !hasTapos(tx)) {\n            if (\n                ctx.expiration !== undefined &&\n                ctx.ref_block_num !== undefined &&\n                ctx.ref_block_prefix !== undefined\n            ) {\n                tx.expiration = ctx.expiration\n                tx.ref_block_num = ctx.ref_block_num\n                tx.ref_block_prefix = ctx.ref_block_prefix\n            } else if (\n                ctx.block_num !== undefined &&\n                ctx.ref_block_prefix !== undefined &&\n                ctx.timestamp !== undefined\n            ) {\n                const header = Serialize.transactionHeader(\n                    ctx as any,\n                    ctx.expire_seconds !== undefined ? ctx.expire_seconds : 60\n                )\n                tx.expiration = header.expiration\n                tx.ref_block_num = header.ref_block_num\n                tx.ref_block_prefix = header.ref_block_prefix\n            } else {\n                throw new Error(\n                    'Invalid transaction context, need either a reference block or explicit TAPoS values'\n                )\n            }\n        }\n        const actions = this.resolveActions(abis, signer)\n        return {...tx, actions}\n    }\n\n    public resolve(abis: AbiMap, signer: abi.PermissionLevel, ctx: TransactionContext = {}) {\n        const transaction = this.resolveTransaction(abis, signer, ctx)\n        const buf = new Serialize.SerialBuffer()\n        const actions = transaction.actions.map((action) => {\n            let contractAbi: any\n            if (isIdentity(action)) {\n                contractAbi = abi.data\n            } else {\n                contractAbi = abis.get(action.account)\n            }\n            if (!contractAbi) {\n                throw new Error(`Missing ABI definition for ${action.account}`)\n            }\n            const contract = getContract(contractAbi)\n            return Serialize.serializeAction(\n                contract,\n                action.account,\n                action.name,\n                action.authorization,\n                action.data\n            )\n        })\n        SigningRequest.transactionType.serialize(buf, {\n            ...transaction,\n            actions,\n        })\n        const serializedTransaction = buf.asUint8Array()\n        return new ResolvedSigningRequest(this, signer, transaction, serializedTransaction)\n    }\n\n    /**\n     * Get Scheme\n     * @returns scheme like 'esr'\n     */\n    public getScheme(): string {\n        return this.scheme\n    }\n\n    /**\n     * Get the id of the chain where this request is valid.\n     * @returns The 32-byte chain id as hex encoded string.\n     */\n    public getChainId(): abi.ChainId {\n        const id = this.data.chain_id\n        switch (id[0]) {\n            case 'chain_id':\n                return id[1]\n            case 'chain_alias':\n                if (ChainIdLookup.has(id[1])) {\n                    return ChainIdLookup.get(id[1])!\n                } else {\n                    throw new Error('Unknown chain id alias')\n                }\n            default:\n                throw new Error('Invalid signing request data')\n        }\n    }\n\n    /** Return the actions in this request with action data encoded. */\n    public getRawActions() {\n        const req = this.data.req\n        switch (req[0]) {\n            case 'action':\n                return [req[1]]\n            case 'action[]':\n                return req[1]\n            case 'identity':\n                let data: string = '0101000000000000000200000000000000' // placeholder permission\n                let authorization: abi.PermissionLevel[] = [PlaceholderAuth]\n                if (req[1].permission) {\n                    let buf = new Serialize.SerialBuffer()\n                    SigningRequest.idType.serialize(buf, req[1])\n                    data = Serialize.arrayToHex(buf.asUint8Array())\n                    authorization = [req[1].permission]\n                }\n                return [\n                    {\n                        account: '',\n                        name: 'identity',\n                        authorization,\n                        data,\n                    },\n                ]\n            case 'transaction':\n                return req[1].actions\n            default:\n                throw new Error('Invalid signing request data')\n        }\n    }\n\n    /** Unresolved transaction. */\n    public getRawTransaction(): abi.Transaction {\n        const req = this.data.req\n        switch (req[0]) {\n            case 'transaction':\n                return req[1]\n            case 'action':\n            case 'action[]':\n            case 'identity':\n                return {\n                    actions: this.getRawActions(),\n                    context_free_actions: [],\n                    transaction_extensions: [],\n                    expiration: '1970-01-01T00:00:00.000',\n                    ref_block_num: 0,\n                    ref_block_prefix: 0,\n                    max_cpu_usage_ms: 0,\n                    max_net_usage_words: 0,\n                    delay_sec: 0,\n                }\n            default:\n                throw new Error('Invalid signing request data')\n        }\n    }\n\n    /** Whether the request is an identity request. */\n    public isIdentity(): boolean {\n        return this.data.req[0] === 'identity'\n    }\n\n    /** Whether the request should be broadcast by signer. */\n    public shouldBroadcast(): boolean {\n        if (this.isIdentity()) {\n            return false\n        }\n        return (this.data.flags & abi.RequestFlagsBroadcast) !== 0\n    }\n\n    /**\n     * Present if the request is an identity request and requests a specific account.\n     * @note This returns `nil` unless a specific identity has been requested,\n     *       use `isIdentity` to check id requests.\n     */\n    public getIdentity(): string | null {\n        if (this.data.req[0] === 'identity' && this.data.req[1].permission) {\n            const {actor} = this.data.req[1].permission\n            return actor === PlaceholderName ? null : actor\n        }\n        return null\n    }\n\n    /**\n     * Present if the request is an identity request and requests a specific permission.\n     * @note This returns `nil` unless a specific permission has been requested,\n     *       use `isIdentity` to check id requests.\n     */\n    public getIdentityPermission(): string | null {\n        if (this.data.req[0] === 'identity' && this.data.req[1].permission) {\n            const {permission} = this.data.req[1].permission\n            return permission === PlaceholderName ? null : permission\n        }\n        return null\n    }\n\n    /** Get raw info dict */\n    public getRawInfo(): {[key: string]: Uint8Array} {\n        let rv: {[key: string]: Uint8Array} = {}\n        for (const {key, value} of this.data.info) {\n            rv[key] = typeof value === 'string' ? Serialize.hexToUint8Array(value) : value\n        }\n        return rv\n    }\n\n    /** Get metadata values as strings. */\n    public getInfo(): {[key: string]: string} {\n        let rv: {[key: string]: string} = {}\n        let raw = this.getRawInfo()\n        for (const key of Object.keys(raw)) {\n            rv[key] = textDecoder.decode(raw[key] as any)\n        }\n        return rv\n    }\n\n    /** Set a metadata key. */\n    public setInfoKey(key: string, value: string | boolean) {\n        let pair = this.data.info.find((pair) => {\n            return pair.key === key\n        })\n        let encodedValue: Uint8Array\n        switch (typeof value) {\n            case 'string':\n                encodedValue = textEncoder.encode(value)\n                break\n            case 'boolean':\n                encodedValue = new Uint8Array([value ? 1 : 0])\n                break\n            default:\n                throw new TypeError('Invalid value type, expected string or boolean.')\n        }\n        if (!pair) {\n            pair = {key, value: encodedValue}\n            this.data.info.push(pair)\n        } else {\n            pair.value = encodedValue\n        }\n    }\n\n    /** Return a deep copy of this request. */\n    public clone(): SigningRequest {\n        let signature: abi.RequestSignature | undefined\n        if (this.signature) {\n            signature = JSON.parse(JSON.stringify(this.signature))\n        }\n        const data = JSON.stringify(this.data, (_, value) => {\n            if (value instanceof Uint8Array) {\n                return Array.from(value)\n            }\n            return value\n        })\n        return new SigningRequest(\n            this.version,\n            JSON.parse(data),\n            this.zlib,\n            this.abiProvider,\n            signature,\n            this.scheme\n        )\n    }\n\n    // Convenience methods.\n\n    public toString() {\n        return this.encode()\n    }\n\n    public toJSON() {\n        return this.encode()\n    }\n}\n\nexport class ResolvedSigningRequest {\n    /** Recreate a resolved request from a callback payload. */\n    static async fromPayload(\n        payload: CallbackPayload,\n        options: SigningRequestEncodingOptions = {}\n    ): Promise<ResolvedSigningRequest> {\n        const request = SigningRequest.from(payload.req, options)\n        const abis = await request.fetchAbis()\n        return request.resolve(\n            abis,\n            {actor: payload.sa, permission: payload.sp},\n            {\n                ref_block_num: Number(payload.rbn),\n                ref_block_prefix: Number(payload.rid),\n                expiration: payload.ex,\n            }\n        )\n    }\n\n    public readonly request: SigningRequest\n    public readonly signer: abi.PermissionLevel\n    public readonly transaction: abi.Transaction\n    public readonly serializedTransaction: Uint8Array\n\n    constructor(\n        request: SigningRequest,\n        signer: abi.PermissionLevel,\n        transaction: abi.Transaction,\n        serializedTransaction: Uint8Array\n    ) {\n        this.request = request\n        this.signer = signer\n        this.transaction = transaction\n        this.serializedTransaction = serializedTransaction\n    }\n\n    public getTransactionId(): string {\n        return Serialize.arrayToHex(sha256(this.serializedTransaction))\n    }\n\n    public getCallback(signatures: string[], blockNum?: number): ResolvedCallback | null {\n        const {callback, flags} = this.request.data\n        if (!callback || callback.length === 0) {\n            return null\n        }\n        if (!signatures || signatures.length === 0) {\n            throw new Error('Must have at least one signature to resolve callback')\n        }\n        const payload: CallbackPayload = {\n            sig: signatures[0],\n            tx: this.getTransactionId(),\n            rbn: String(this.transaction.ref_block_num),\n            rid: String(this.transaction.ref_block_prefix),\n            ex: this.transaction.expiration,\n            req: this.request.encode(),\n            sa: this.signer.actor,\n            sp: this.signer.permission,\n        }\n        for (const [n, sig] of signatures.slice(1).entries() as any) {\n            payload[`sig${n}`] = sig\n        }\n        if (blockNum) {\n            payload.bn = String(blockNum)\n        }\n        const url = callback.replace(/({{([a-z0-9]+)}})/g, (_1, _2, m) => {\n            return payload[m] || ''\n        })\n        return {\n            background: (flags & abi.RequestFlagsBackground) !== 0,\n            payload,\n            url,\n        }\n    }\n}\n\n/** Internal helper that creates a contract representation from an abi for the eosjs serializer. */\nfunction getContract(contractAbi: any): Serialize.Contract {\n    const types = Serialize.getTypesFromAbi(Serialize.createInitialTypes(), contractAbi)\n    const actions = new Map<string, Serialize.Type>()\n    for (const {name, type} of contractAbi.actions) {\n        actions.set(name, Serialize.getType(types, type))\n    }\n    return {types, actions}\n}\n\nasync function serializeAction(\n    action: abi.Action,\n    abiProvider?: AbiProvider\n) {\n    if (typeof action.data === 'string') {\n        return action\n    }\n    let contractAbi: any\n    if (isIdentity(action)) {\n        contractAbi = abi.data\n    } else if (abiProvider) {\n        contractAbi = await abiProvider.getAbi(action.account)\n    } else {\n        throw new Error('Missing abi provider')\n    }\n    const contract = getContract(contractAbi)\n    return Serialize.serializeAction(\n        contract,\n        action.account,\n        action.name,\n        action.authorization,\n        action.data\n    )\n}\n\nfunction variantId(chainId?: abi.ChainId | abi.ChainAlias): abi.VariantId {\n    if (!chainId) {\n        chainId = ChainName.EOS\n    }\n    if (typeof chainId === 'number') {\n        return ['chain_alias', chainId]\n    } else {\n        // resolve known chain id's to their aliases\n        const name = idToName(chainId)\n        if (name !== ChainName.UNKNOWN) {\n            return ['chain_alias', name]\n        }\n        return ['chain_id', chainId]\n    }\n}\n\nfunction isIdentity(action: abi.Action) {\n    return action.account === '' && action.name === 'identity'\n}\n\nfunction hasTapos(tx: abi.Transaction) {\n    return !(\n        tx.expiration === '1970-01-01T00:00:00.000' &&\n        tx.ref_block_num === 0 &&\n        tx.ref_block_prefix === 0\n    )\n}\n\n/** Resolve a chain id to a chain name alias, returns UNKNOWN (0x00) if the chain id has no alias. */\nexport function idToName(chainId: abi.ChainId): ChainName {\n    chainId = chainId.toLowerCase()\n    for (const [n, id] of ChainIdLookup as any) {\n        if (id === chainId) {\n            n\n        }\n    }\n    return ChainName.UNKNOWN\n}\n\n/** Resolve a chain name alias to a chain id. */\nexport function nameToId(chainName: ChainName): abi.ChainId {\n    return (\n        ChainIdLookup.get(chainName) ||\n        '0000000000000000000000000000000000000000000000000000000000000000'\n    )\n}\n"],"names":["runtime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","undefined","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","makeInvokeMethod","tryCatch","fn","arg","type","call","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","constructor","displayName","defineIteratorMethods","forEach","method","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","__await","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","then","unwrapped","error","previousPromise","enqueue","callInvokeWithMethodAndArg","async","Promise","iter","next","done","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","info","resultName","nextLoc","toString","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","keys","object","reverse","length","pop","iterable","iteratorMethod","isNaN","i","skipTempReset","prev","charAt","slice","stop","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","Function","RequestFlagsNone","RequestFlagsBroadcast","RequestFlagsBackground","data","version","types","new_type_name","structs","fields","base","variants","actions","charset","lookup","Uint8Array","charCodeAt","encode","byteLength","byteRemainder","mainLength","parts","a","b","c","d","chunk","join","decode","input","p","require","ProtocolVersion","textEncoder","TextEncoder","textDecoder","TextDecoder","AbiTypes","Serialize","getTypesFromAbi","createInitialTypes","abi","ChainName","ChainIdLookup","Map","EOS","TELOS","JUNGLE","KYLIN","WORBLI","BOS","MEETONE","INSIGHTS","BEOS","WAX","PROTON","FIO","DEFAULT_SCHEME","PlaceholderName","PlaceholderPermission","PlaceholderAuth","actor","permission","SigningRequest","zlib","abiProvider","signature","scheme","flags","req","callback","args","options","serialize","action","serializeAction","identity","transaction","all","map","tx","expiration","ref_block_num","ref_block_prefix","context_free_actions","transaction_extensions","delay_sec","max_cpu_usage_ms","max_net_usage_words","chain_id","variantId","chainId","broadcast","url","background","signatureProvider","sign","account","fromTransaction","serializedTransaction","arrayToHex","hexToUint8Array","buf","SerialBuffer","id","pushArray","fromData","asUint8Array","from","uri","split","path","base64u","startsWith","header","array","inflateRaw","buffer","deserialize","haveReadData","get","message","getSignatureDigest","getData","sha256","setSignature","signer","setCallback","setBroadcast","compress","slashes","shouldCompress","sigData","getSignatureData","set","deflated","deflateRaw","out","getRequiredAbis","getRawActions","filter","isIdentity","index","indexOf","requiresTapos","getRawTransaction","hasTapos","fetchAbis","provider","abis","getAbi","resolveActions","rawAction","contractAbi","contract","getContract","getName","deserializeAction","authorization","auth","resolveTransaction","ctx","block_num","timestamp","transactionHeader","expire_seconds","transactionType","ResolvedSigningRequest","getScheme","getChainId","has","idType","shouldBroadcast","getIdentity","getIdentityPermission","getRawInfo","rv","getInfo","raw","setInfoKey","pair","find","encodedValue","clone","JSON","parse","stringify","_","Array","toJSON","request","fromPayload","payload","sa","sp","Number","rbn","rid","ex","getTransactionId","getCallback","signatures","blockNum","sig","String","entries","n","bn","replace","_1","_2","m","getType","idToName","UNKNOWN","toLowerCase","nameToId","chainName"],"mappings":"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"}